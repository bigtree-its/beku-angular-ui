<div *ngIf="chef !== null && chef !== undefined">

    <div class="page">
        <div class="page-left">
            <div class="chef-card">
                <div class="flex-row">
                    <div class="chef-img-div">
                        <img src="/assets/images/chefs/{{chef._id}}/cover-photo.jpg" height="170px" width="150px">
                    </div>
                    <div class="flex-column gap-1" style="padding: 5px;width: 100%;">
                        <span class="chef-name">{{chef.kitchenName}}</span>
                        <div class="flex-between" style="margin-bottom: 5px;">
                            <span [ngStyle]="{'color': chef.open ? 'green' :  'red'}">{{chef.open?
                                "Open":"Closed"}}</span>
                            <span *ngIf="chef.preOrderOnly" class="chef-cuisine">PreOrder Only</span>
                        </div>

                        <div class="flex-row-wrap">
                            <ng-container *ngFor="let cuisine of chef.cuisines | slice:0:3">
                                <div class="chef-cuisine">{{ cuisine.name }}
                                </div>
                            </ng-container>
                        </div>
                        <div class="flex-column" *ngIf="chef.doDelivery">
                            <div class="flex-row" style="padding: 5px;align-items: center;">
                                <img src="/assets/icons/motorbike.png" alt height="10px" width="10px" style="margin-right: 5px;">
                                <span style="font-size: 12px;">I do delivery
                                    upto {{chef.deliveryDistance}} miles</span>
                            </div>
                            <div class="flex-row" *ngIf="chef.freeDeliveryOver > 0" style="padding: 5px;align-items: center;">
                                <img src="/assets/icons/free-shipping.png" alt height="10px" width="10px" style="margin-right: 5px;">
                                <span style="font-size: 12px;">Free Delivery
                                    order over {{chef.freeDeliveryOver |
                                    currency: 'GBP'}}</span>
                            </div>
                        </div>
                        <div *ngIf="!chef.doDelivery" style="padding: 5px 0;">
                            <span>Collection Only</span>
                        </div>
                    </div>
                </div>

                <div class="chef-card-info-div">
                    <span class="chef-desc">{{chef.description}}</span>
                    <div style="display: flex;align-items: center;">
                        <img [src]="star" style="width: 15px;height: 15px;">
                        <span style="padding-left: 6px;">{{chef.rating}}</span>
                    </div>
                </div>
            </div>
            <div class="menu-bar">
                <span (click)="selectLayout('Menu')" class="link-button mx-2">Menu</span>
                <span (click)="selectLayout('Reviews')" class="link-button mx-2">Reviews</span>
                <span (click)="selectLayout('Info')" class="link-button mx-2">Info</span>
            </div>
            <ng-container [ngSwitch]="activeLayout">
                <ng-container *ngSwitchCase="'Menu'" [ngTemplateOutlet]="menuLayout"></ng-container>
                <ng-container *ngSwitchCase="'Reviews'" [ngTemplateOutlet]="reviewsLayout"></ng-container>
                <ng-container *ngSwitchCase="'Info'" [ngTemplateOutlet]="infoLayout"></ng-container>
            </ng-container>
        </div>
        <div class="page-right">
            <div class="cart">
                <div class="cart-header">
                    <span style="font-size: 20px;">Your Order</span>
                    <span *ngIf="order != null" style="font-size: 20px;">{{order.total | currency:
                        'GBP'}}</span>
                </div>
                <div class="cart-chef" *ngIf="order !== null && order.supplier !== null">
                    <span style="font-weight: 500;font-size: 16px;padding-right: 10px;">{{order.supplier.name}}</span>
                    <span style="padding-right: 10px;">{{order.supplier.address.addressLine1}},</span>
                    <span>{{order.supplier.address.city}}, {{order.supplier.address.postcode}}</span>
                </div>

                <div *ngIf="order !== null && order !== undefined &&  order.items !== null &&  order.items !== undefined &&  order.items.length > 0; then itemsBlock else noItemsBlock">
                </div>
            </div>
            <div class="footer">
                <div class="footer-body">
                    <button class="btn-block" [routerLink]="[ '/checkout'] " [disabled]="(order === null || order === undefined ||  order.items === null ||  order.items === undefined || order.items.length === 0)">Checkout</button>
                    <!-- <button class="big-black-btn">Checkout</button> -->
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #noItemsBlock>
    <div class="order-no-items">
        <img src="/assets/icons/shopping-basket.png" height="50px" width="50px" class="empty-bag">
        <span style="margin-top: 10px;font-weight: 900;">
            YOUR BASKET IS EMPTY
        </span>
        <br>
        <span>What are you feeling today?</span>
        <span>Checkout our Home Cooks</span>
    </div>
</ng-template>

<ng-template #itemsBlock>
    <div class="order-with-items">
        <div class="order-summary-section">
            <div class="flex-row-space-between">
                <span>Subtotal</span>
                <span>{{order.subTotal | currency: 'GBP'}}</span>
            </div>
            <div class="flex-row-space-between">
                <span>Delivery fee</span>
                <span>{{order.deliveryFee | currency: 'GBP'}}</span>
            </div>
            <div class="flex-row-space-between">
                <span>Packing fee</span>
                <span>{{order.packingFee | currency: 'GBP'}}</span>
            </div>
            <div class="flex-row-space-between">
                <span>Service Fee</span>
                <span>{{order.serviceFee | currency: 'GBP'}}</span>
            </div>
            <div class="flex-row-space-between" style="margin-top: 10px;">
                <span style="font-weight: 900;">TOTAL</span>
                <span style="font-weight: 900;">{{order.total | currency:
                    'GBP'}}</span>
            </div>
        </div>
        <div class="order-items-section">
            <div *ngIf="order !== null && order !== undefined && order.items !== null && order.items !== undefined && order.items.length > 0">
                <app-order-item *ngFor="let item of order.items" [item]="item"></app-order-item>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #NoItemsInCategory>
    <span style="margin-top: 10px;font-weight: 900;align-self: center;opacity: 0.5;">
        NO ITEMS TO DISPLAY
    </span>
</ng-template>
<ng-template #ItemsInCategory>
    <div class="menu-items-container">
        <app-menu-item *ngFor="let menu of items_to_display" [menu]="menu" [displayDescription]="true">
        </app-menu-item>
    </div>
</ng-template>

<ng-template #reviewsLayout>
    <div class="flex-column">
    </div>
</ng-template>
<ng-template #infoLayout>
    <div class="flex-column">
    </div>
</ng-template>

<ng-template #menuLayout>
    <div class="flex-column justify-content-center align-items-center">
        <div class="scroll-container">
            <div style="float: left">
                <img src="/assets/icons/left-arrow.png" alt loading="lazy" class="scroll-left" (click)="scrollLeft()">
            </div>

            <div #widgetsContent class="middle">
                <span *ngFor="let c of collections" class="select-span" (click)="onSelectCategory(c)" [class.selectedSpan]="isSelectedCategory(c)">{{c.name}}</span>
            </div>

            <div style="float: right">
                <!-- <button (click)="scrollRight()">right</button> -->
                <img src="/assets/icons/right-arrow.png" alt loading="lazy" class="scroll-right" (click)="scrollRight()">
            </div>
        </div>
        <div *ngIf="items_to_display !== null && items_to_display !== undefined &&  items_to_display.length > 0; then ItemsInCategory else NoItemsInCategory">
        </div>

        <div *ngIf="displayCal && calendarsToDisplay !== null && calendarsToDisplay !== undefined && calendarsToDisplay.length > 0">
            <div *ngFor="let calendar of calendarsToDisplay;  let i = index">
                <div *ngIf="calendar.menus !== null && calendar.menus !== undefined" class="thisweek">
                    <app-menu-item *ngFor="let menu of calendar.menus" [menu]="menu" [orderBy]="calendar.orderBefore" [displayDescription]="false"></app-menu-item>
                </div>
            </div>
        </div>
    </div>
</ng-template>